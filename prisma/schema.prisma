// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Subjects {
  id              Int @id
  idDegree        Int
  idSeason        Int
  idSubject       Int
  name            String
  course          String
  caracter        String
  credits         Int @default(6)
  language        String @default("espa√±ol")
  places          Int?
  enrolled        Int?
  passed          Int?
  failed          Int?
  notPresented    Int?
  passRate        Decimal?
  rendRate        Decimal?
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  Belong  Belong[]
  Impart Impart[]
}

model Teachers {
  id              Int     @id 
  username        String
  name            String
  lastName        String
  email           String
  web             String?
  xp              Int @default(0)
  totalVotes      Int @default(0)
  salt            String
  passwd          String

  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  Impart Impart[]
}

model Students {
  id              Int       @id
  username        String
  email           String
  name            String
  lastName        String 
  web             String?
  salt            String
  passwd          String
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt

  Belong  Belong[]
}

model Impart {
  id        Int @id
  subject   Subjects @relation(fields: [idSubject], references: [id])
  idSubject Int
  teacher   Teachers @relation(fields: [idTeacher], references: [id])
  idTeacher Int
  rol       String
}

model Belong {
  id          Int @id
  subject     Subjects @relation(fields: [idSubject], references: [id])
  idSubject   Int
  student     Students @relation(fields: [idStudent], references: [id])
  idStudent   Int
}
